{%- assign blog = blogs[section.settings.blog] -%}

<section id="index-articles" class="mt-14 flex flex-col items-center px-6">
  <p class="w-full text-2xl text-neutral-800 font-black">RECENT ARTICLES</p>
  <div class="mt-6 border-b border-black flex flex-col">
    {% for article in blog.articles limit: 1 %}
      <img class="w-full" src="{{ article.image | image_url: width: 512 }}" alt="Article cover photo">
      <p class="font-black text-2xl text-neutral-800 uppercase mt-3">{{ article.title }}</p>
      <p class="mt-3 text-sm">{{ article.published_at }}</p>
      <p class="mt-2 line-clamp-4">{{ article.excerpt }}</p>
      <a href="{{ article.url }}" class="my-4 text-downy-300">READ MORE</a>
    {% endfor %}
  </div>
  <div>
    {% for article in blog.articles limit: section.settings.post_limit %}
      {% unless forloop.first == true %}
        <div class="flex py-6 border-b border-black">
          <img class="flex-grow w-32 mr-4 object-cover" src="{{ article.image | image_url: width: 512 }}" alt="Article cover photo">
          <div class="flex flex-col">
            <p class="font-black text-xl text-neutral-800">{{ article.title }}</p>
            <p class="text-xs mt-2">{{ article.published_at }}</p>
            <p class="mt-2 max-h-16 line-clamp-2">{{ article.excerpt }}</p>
            <a class="mt-3 text-downy-300" href="{{ article.url }}">READ MORE</a>
          </div>
        </div>
      {% endunless %}
    {% endfor %}
  </div>
  <a class="mt-8 w-full py-6 text-xl text-center text-white font-black bg-downy-300" href="#">VIEW MORE ARTICLES</a>
</section>

{% schema %}
{
  "name": "Index Articles",
  "settings": [
    {
      "id": "blog",
      "type": "blog",
      "label": "Blog"
    },
    {
      "type": "range",
      "id": "post_limit",
      "label": "Posts",
      "default": 4,
      "min": 4,
      "max": 13,
      "step": 3
    }
  ]
}
{% endschema %}