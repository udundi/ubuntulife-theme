<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
<script src="https://unpkg.com/vue@3"></script>

<div id="faq-page">
<header class="faq-header w-screen mb-20" role="banner">
  <div class="wrapper relative h-[300px] flex flex-row justify-center md:items-center">
    <div class="w-full sm:hover:translate-x-full hover:opacity-100 duration-500 ease-in-out bg-neutral-50">
      <image
        class="hidden sm:flex -translate-x-full opacity-0 hover:opacity-100 duration-500 ease-in-out w-full h-full object-cover"
        src="https://cdn.shopify.com/s/files/1/1257/5497/files/2021-Lifestyle-480_1.png?v=1659647294"
      />
    </div>

    <div class="pointer-events-none mt-12 md:mt-0 flex flex-col items-center absolute z-10 px-2">
      <h1 class="disabled text-3xl sm:text-[40px] tracking-wide font-bold text-center md:text-neutral-800">
        FREQUENTLY ASKED QUESTIONS
      </h1>
      <p class="disabled text-sm sm:text-base text-center font-medium px-2 max-w-[290px] sm:max-w-[425px] mt-5">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
      </p>
    </div>
  </div>
</header>
<div id="faq-swiper">
  <div class="swiper w-screen overflow-hidden px-10" ref="carousel">
    <div class="swiper-wrapper mr-5">
      <div
          id="orders"
          onclick="updateChoice(this.id)"
          class="swiper-slide w-60 h-40 py-5 px-6 bg-white border border-solid border-downy-300 hover:border hover:border-solid hover:bg-white sm:hover:border-downy-300 hover:border-downy-300 transition-all duration-300">
          <div class="my-5 flex flex-col justify-start items-center">
              <image
                class="w-9 h-9 mb-5"
                src="https://cdn.shopify.com/s/files/1/1257/5497/files/order-icon.svg?v=1659639509"
              >
              </image>
            <p class="font-medium text-neutral-800 text-lg">
              ORDERS
            </p>
          </div>
        </div>

        <div
        id="fitting-care"
        onclick="updateChoice(this.id)"
        class="swiper-slide w-60 h-40 py-5 px-6 bg-gray-50 hover:border hover:border-solid hover:bg-white sm:hover:border-downy-300 hover:border-downy-300 transition-all duration-300">
        <div class="my-5 flex flex-col justify-start items-center">
            <image
              class="w-9 h-9 mb-5"
              src="https://cdn.shopify.com/s/files/1/1257/5497/files/measurement-icon.svg?v=1659639509"
            >
            </image>
          <p class="font-medium text-neutral-800 text-lg">
            FITTING & CARE
          </p>
        </div>
      </div>

      <div
          id="shipping-returns"
          onclick="updateChoice(this.id)"
          class="swiper-slide w-60 h-40 py-5 px-6 bg-gray-50 hover:border hover:border-solid hover:bg-white sm:hover:border-downy-300 hover:border-downy-300 transition-all duration-300">
          <div class="my-5 flex flex-col justify-start items-center">
              <image
                class="w-9 h-9 mb-5"
                src="https://cdn.shopify.com/s/files/1/1257/5497/files/shipping-icon.svg?v=1659639509"
              >
              </image>
            <p class="font-medium text-neutral-800 text-lg">
              SHIPPING & RETURNS
            </p>
          </div>
        </div>

        <div
        id="international"
        onclick="updateChoice(this.id)"
        class="swiper-slide w-60 h-40 py-5 px-6 bg-gray-50 hover:border hover:border-solid hover:bg-white sm:hover:border-downy-300 hover:border-downy-300 transition-all duration-300">
        <div class="my-5 flex flex-col justify-start items-center">
            <image
              class="w-9 h-9 mb-5"
              src="https://cdn.shopify.com/s/files/1/1257/5497/files/international-icon.svg?v=1659639509"
            >
            </image>
          <p class="font-medium text-neutral-800 text-lg">
            INTERNATIONAL
          </p>
        </div>
      </div>

      <div
      id="about-products"
      onclick="updateChoice(this.id)"
      class="swiper-slide w-60 h-40 py-5 px-6 bg-gray-50 hover:border hover:border-solid hover:bg-white sm:hover:border-downy-300 hover:border-downy-300 transition-all duration-300">
      <div class="my-5 flex flex-col justify-start items-center">
          <image
            class="w-9 h-9 mb-5"
            src="https://cdn.shopify.com/s/files/1/1257/5497/files/about-icon.svg?v=1660040970"
          >
          </image>
        <p class="font-medium text-neutral-800 text-lg">
          ABOUT PRODUCTS
        </p>
      </div>
    </div>

    </div>
  </div>
  </div>

  <div id="orders-acc" class="acc-wrapper hidden">
    {% section 'faq-orders-accordion' %}
  </div>
  
  <div id="fitting-care-acc" class="wrapper hidden">
    {% section 'faq-fitting-accordion' %}
  </div>
  
  <div id="shipping-returns-acc" class="wrapper hidden">
    {% section 'faq-shipping-accordion' %}
  </div>
  
  <div id="international-acc" class="wrapper hidden">
    {% section 'faq-international-accordion' %}
  </div>
  
  <div id="about-products-acc" class="wrapper hidden">
    {% section 'faq-about-accordion' %}
  </div>



</div>
</div>

<style>
  .accordion-content {
  transition: max-height 0.3s ease-out, padding 0.3s ease;
  }
</style>

<script>


  window.onload = (event) => {
    updateChoice('orders');
};

let previousSelection = "";
  let selection = "";
  
  const hideAccordions = () => {
    previousSelection = "";
    const collection = document.getElementsByClassName("acc-wrapper");
      for (let i = 0; i < collection.length; i++) {
        collection[i].style.backgroundColor = "red";
        collection[i].classList.remove('hidden');
        collection[i].classList.add('hidden');
      }
  }

  const updateChoice = (id) => {
    previousSelection = selection;
    selection = "";
    console.log('~~~~~', id)
    selection = id;
    hideAccordions();
    document.getElementById(selection + "-acc").classList.remove('hidden');
  
  }


const faqSwiper = new Swiper(".swiper", {
            threshold: 8,
            preventCLicks: false,
            updateOnWindowResize: true,
            slidesOffsetBefore: 15,
            slidesOffsetAfter: 15,
            centeredSlides: true,
            spaceBetween: 25,
            slidesPerView: 'auto',
            slideToClickedSlide: true,
            speed: 700,
            on: {
              tap: function () {
                const currentSlide = faqSwiper.clickedIndex;
                const previousSlide = faqSwiper.previousIndex;
                const swiperCollection = document.getElementsByClassName("swiper-slide");

                faqSwiper.slideTo(currentSlide);


                  for (let i = 0; i < swiperCollection.length; i++) {
                    swiperCollection[i].classList.remove("bg-white", "border", "border-solid", "border-downy-300");
                    swiperCollection[i].classList.add("bg-gray-50");
                  }

                document.getElementById(faqSwiper.slides[currentSlide].id).classList.remove("bg-gray-50");
                document.getElementById(faqSwiper.slides[currentSlide].id).classList.add("bg-white", "border", "border-solid", "border-downy-300");
              },
              slideChange: function () {
                updateChoice(selection);
              },
          
            },
            breakpoints: {
              390: {
                slidesPerGroup: 1,
                slidesOffsetBefore: 0,
                slidesOffsetAfter: 0,
                centeredSlides: true,
                spaceBetween: 30,
              },
              640: {
                slidesOffsetBefore: 0,
                  centeredSlides: false,
                spaceBetween: 20,
              },
              768: {
                slidesOffsetBefore: 0,
                centeredSlides: false,
                spaceBetween: 40,
              },
              1024: {
                slidesOffsetBefore: 0,
                centeredSlides: false,
                centerInsufficientSlides: true,
                spaceBetween: 50,
              },
            }
          });

  </script>