{%- assign number_of_comments = article.comments_count -%}

{% if comment and comment.created_at %}
  {%- assign number_of_comments = article.comments_count | plus: 1 -%}
{% endif %}


<div class="mt-8 px-6 flex flex-col max-w-screen-md mx-auto lg:max-w-screen-lg">
  <p class="uppercase text-downy-300">{{ article.published_at | date: '%B %Y' }}</p>
  <h1 class="mt-2 uppercase font-black text-4xl">{{ title }}</h1>
  <p class="mt-6 text-neutral-500 text-xs"><a href="/blogs/news">BLOG</a>&nbsp;/&nbsp;<span class="uppercase text-neutral-700">{{ title }}</span></p>
</div>

<img class="mt-7 w-full max-h-[40rem] lg:w-5/6 lg:object-contain mx-auto" src="{{ article.image | image_url: width: 2048 }}" alt="article cover image">

<!-- Styling for the article content -->
<style>
  #article-content-wrapper div {
    margin-bottom: 2rem;
  }

  #article-content-wrapper h1,
  #article-content-wrapper h2,
  #article-content-wrapper h3,
  #article-content-wrapper h4,
  #article-content-wrapper h5,
  #article-content-wrapper h6 {
    font-weight: 900;
  }

  #article-content-wrapper h1 {
    font-size: 40px;
  }

  #article-content-wrapper h2 {
    font-size: 32px;
  }

  #article-content-wrapper h3 {
    font-size: 24px;
  }

  #article-content-wrapper h4 {
    font-size: 20px;
  }

  #article-content-wrapper h5 {
    font-size: 18px;
  }

  #article-content-wrapper h6 {
    font-size: 16px;
  }

  #article-content-wrapper img {
    object-fit: contain;
    object-position: center;
    margin-left: auto;
    margin-right: auto;
  }
</style>

<div class="mt-7 flex px-7 justify-center">
  <div class="hidden lg:flex flex-col items-end w-1/6 mt-7 mr-12 [&>*]:mb-6 [&>*]:h-5 [&>*]:w-5">
    <a class='cursor-pointer' onclick="shareFacebook()">
      <svg class="w-full h-full" width="12" height="19" viewBox="0 0 12 19" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M11.0392 0.506013C11.0392 0.229873 10.8146 0.00601312 10.5375 0.00601312H8.02856C5.39852 -0.124528 3.1565 1.88611 3.01071 4.50601V7.20601H0.501785C0.224657 7.20601 0 7.42987 0 7.70601V10.3061C0 10.5822 0.224657 10.8061 0.501785 10.8061H3.01071V17.5061C3.01071 17.7822 3.23537 18.0061 3.5125 18.0061H6.5232C6.80033 18.0061 7.02499 17.7822 7.02499 17.5061V10.8061H9.65434C9.8839 10.8093 10.0864 10.657 10.1461 10.4361L10.8686 7.83601C10.9091 7.68629 10.8776 7.52633 10.7832 7.40298C10.6889 7.27964 10.5425 7.20688 10.3869 7.20601H7.02499V4.50601C7.07671 3.99311 7.51124 3.60343 8.02856 3.60601H10.5375C10.8146 3.60601 11.0392 3.38216 11.0392 3.10601V0.506013Z" fill="black"/>
      </svg>
    </a>
    <a class='cursor-pointer' onclick="shareTwitter()">
      <svg width="23" height="19" viewBox="0 0 23 19" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M22.7871 2.18967C21.9491 2.55967 21.0489 2.80967 20.1025 2.92267C21.079 2.34046 21.8095 1.42414 22.1578 0.34467C21.2404 0.88766 20.2363 1.26987 19.1893 1.47467C17.7415 -0.0656296 15.4356 -0.444179 13.5685 0.55193C11.7014 1.54803 10.7391 3.67011 11.2229 5.72467C7.4635 5.53659 3.96092 3.76717 1.58664 0.856671C1.18521 1.54667 0.954394 2.34667 0.954394 3.19867C0.953484 4.7564 1.73374 6.21157 3.03378 7.07667C2.29142 7.05313 1.56544 6.85326 0.916254 6.49367V6.55367C0.916104 8.77164 2.48481 10.6823 4.66659 11.1216C3.97793 11.3073 3.25591 11.3347 2.55508 11.2016C3.16718 13.0993 4.92256 14.3991 6.92261 14.4356C5.26656 15.731 3.22134 16.4337 1.11596 16.4306C0.743023 16.4307 0.370393 16.409 0 16.3656C2.13707 17.7348 4.62478 18.4615 7.16548 18.4586C15.7661 18.4586 20.4678 11.3606 20.4678 5.20467C20.4678 5.00467 20.4628 4.80267 20.4538 4.60267C21.3683 3.94365 22.1577 3.12757 22.785 2.19267L22.7871 2.18967Z" fill="black"/>
      </svg>
    </a>
    {% comment %} <a class='cursor-pointer' onclick="shareInstagram()">
      <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.40673 0.055C6.38772 0.01 6.7005 0 9.19938 0C11.6983 0 12.0111 0.010833 12.9912 0.055C13.9714 0.099167 14.6404 0.255004 15.2259 0.480834C15.8389 0.711664 16.395 1.0725 16.855 1.53916C17.3233 1.99666 17.6846 2.55 17.9154 3.16166C18.1429 3.745 18.2984 4.41166 18.3436 5.38666C18.3888 6.36583 18.3988 6.6775 18.3988 9.1667C18.3988 11.6567 18.3879 11.9683 18.3436 12.9458C18.2993 13.9208 18.1429 14.5875 17.9154 15.1708C17.6846 15.7826 17.3227 16.3368 16.855 16.795C16.395 17.2617 15.8389 17.6217 15.2259 17.8517C14.6404 18.0783 13.9714 18.2333 12.9929 18.2783C12.0111 18.3233 11.6983 18.3333 9.19938 18.3333C6.7005 18.3333 6.38772 18.3225 5.40673 18.2783C4.42825 18.2342 3.7592 18.0783 3.17379 17.8517C2.55987 17.6216 2.00364 17.261 1.54383 16.795C1.07581 16.3372 0.713633 15.7832 0.482549 15.1717C0.25591 14.5883 0.100357 13.9217 0.055196 12.9467C0.010035 11.9675 0 11.6558 0 9.1667C0 6.67666 0.010872 6.365 0.055196 5.38833C0.09952 4.41166 0.25591 3.745 0.482549 3.16166C0.713974 2.55006 1.07643 1.99609 1.54466 1.53833C2.00383 1.07208 2.5595 0.711204 3.17295 0.480834C3.75837 0.255004 4.42741 0.1 5.40589 0.055H5.40673ZM12.9165 1.70518C11.9464 1.66102 11.6554 1.65185 9.19908 1.65185C6.74285 1.65185 6.45181 1.66102 5.4817 1.70518C4.58434 1.74602 4.09761 1.89518 3.77312 2.02102C3.34409 2.18768 3.03717 2.38518 2.71519 2.70602C2.40998 3.00189 2.17509 3.36209 2.02775 3.76018C1.90146 4.08352 1.75177 4.56852 1.71079 5.46268C1.66646 6.42935 1.65726 6.71935 1.65726 9.1669C1.65726 11.6144 1.66646 11.9044 1.71079 12.871C1.75177 13.7652 1.90146 14.2502 2.02775 14.5735C2.17494 14.971 2.40994 15.3319 2.71519 15.6277C3.01208 15.9319 3.3742 16.166 3.77312 16.3127C4.09761 16.4385 4.58434 16.5877 5.4817 16.6285C6.45181 16.6727 6.74201 16.6819 9.19908 16.6819C11.6562 16.6819 11.9464 16.6727 12.9165 16.6285C13.8139 16.5877 14.3006 16.4385 14.6251 16.3127C15.0541 16.146 15.361 15.9485 15.683 15.6277C15.9883 15.3319 16.2233 14.971 16.3705 14.5735C16.4967 14.2502 16.6464 13.7652 16.6874 12.871C16.7317 11.9044 16.7409 11.6144 16.7409 9.1669C16.7409 6.71935 16.7317 6.42935 16.6874 5.46268C16.6464 4.56852 16.4967 4.08352 16.3705 3.76018C16.2032 3.33268 16.005 3.02685 15.683 2.70602C15.3861 2.40191 15.0246 2.16786 14.6251 2.02102C14.3006 1.89518 13.8139 1.74602 12.9165 1.70518ZM8.02449 11.9924C9.37777 12.5537 10.9405 12.0829 11.755 10.8684C12.5694 9.654 12.408 8.03514 11.3698 7.00406C10.4919 6.12984 9.17195 5.8685 8.02532 6.34187C6.8787 6.81524 6.13104 7.93013 6.13086 9.1669C6.13068 10.4036 6.878 11.5187 8.02449 11.9924ZM5.85565 5.8352C7.05019 4.64491 8.79127 4.18005 10.4231 4.61573C12.0548 5.0514 13.3294 6.32143 13.7666 7.9474C14.2039 9.5734 13.7373 11.3082 12.5428 12.4985C10.6962 14.3386 7.70225 14.3386 5.85565 12.4985C4.00906 10.6585 4.00906 7.67523 5.85565 5.8352ZM14.9772 5.15659C15.2735 4.87813 15.3944 4.46121 15.2928 4.06823C15.1912 3.67525 14.8832 3.36839 14.4889 3.26717C14.0945 3.16596 13.6761 3.2864 13.3966 3.58159C12.9816 4.02 12.9916 4.70779 13.4193 5.13396C13.847 5.56013 14.5373 5.57015 14.9772 5.15659Z" fill="black"/>
      </svg>
    </a> {% endcomment %}
    <a class='cursor-pointer' onclick="shareLinkedin()">
      <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.45522 6.96883H11.1824V8.81883C11.7193 7.75483 13.0962 6.79883 15.1646 6.79883C19.1297 6.79883 20.071 8.91683 20.071 12.8028V19.9998H16.0568V13.6878C16.0568 11.4748 15.5199 10.2268 14.153 10.2268C12.2573 10.2268 11.4695 11.5718 11.4695 13.6868V19.9998H7.45522V6.96883ZM0.572348 19.8298H4.58662V6.79883H0.572348V19.8298ZM5.16136 2.55C5.16166 3.22724 4.88946 3.87633 4.40567 4.352C3.92034 4.83262 3.26342 5.10165 2.57917 5.1C1.89613 5.09954 1.24072 4.8312 0.754688 4.353C0.272716 3.87578 0.001173 3.22704 0 2.55C0 1.873 0.270963 1.225 0.755688 0.747C1.2413 0.268158 1.89699 -0.000299211 2.58018 2.50265e-07C3.26461 2.50265e-07 3.92095 0.269 4.40567 0.747C4.88939 1.225 5.16136 1.873 5.16136 2.55Z" fill="black"/>
      </svg>
    </a>
    <a class='cursor-pointer' onclick="sharePinterest('{{ article.image | image_url: width: 2048 }}')">
      <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-pinterest" viewBox="0 0 32 32">
        <path fill="#000" d="M27.52 9.6c-.64-5.76-6.4-8.32-12.8-7.68-4.48.64-9.6 4.48-9.6 10.24 0 3.2.64 5.76 3.84 6.4 1.28-2.56-.64-3.2-.64-4.48-1.28-7.04 8.32-12.16 13.44-7.04 3.2 3.84 1.28 14.08-4.48 13.44-5.12-1.28 2.56-9.6-1.92-11.52-3.2-1.28-5.12 4.48-3.84 7.04-1.28 4.48-3.2 8.96-1.92 15.36 2.56-1.92 3.84-5.76 4.48-9.6 1.28.64 1.92 1.92 3.84 1.92 6.4-.64 10.24-7.68 9.6-14.08z"/>
      </svg>
    </a>
  </div>
  <div class="max-w-lg lg:max-w-screen-md">
    {% unless article.excerpt == "" %}
      <h3 class="font-black text-lg">{{ article.excerpt }}</h3>
    {% endunless %}
    <div class="mt-7">
      <div id="article-content-wrapper">
        {{ content }}
      </div>
      {% if blog.comments_enabled? %}
        <span class="flex justify-between lg:justify-start items-end lg:items-center mt-10 lg:mt-16 lg:mb-4 pt-8 border-t border-neutral-500">
          <h4 class="text-lg lg:text-3xl lg:mr-5 text-neutral-700 font-black leading-5">LEAVE A COMMENT</h4>
          {% if article.comments_count == 0 %}
            <p class="text-sm lg:text-base font-medium">NO COMMENTS</p>
          {% elsif article.comments_count == 1 %}
            <p class="text-sm lg:text-base font-medium">1 COMMENT</p>
          {% else %}
            <p class="text-sm lg:text-base font-medium">{{ article.comments_count }} COMMENTS</p>
          {% endif %}
        </span>

        {% form 'new_comment', article %}

          {{ form.errors | default_errors }}

          <div class="flex flex-col">
            <div class="flex flex-col lg:flex-row">
              <div class="flex flex-col lg:w-1/3 lg:pr-5">
                <label for="CommentAuthor" class="text-sm mt-5 mb-2">NAME</label>
                <input class="border  py-3.5 px-3 text-sm placeholder:text-neutral-500 {% if form.errors contains 'author' %}border-red-500{% else %}border-black{% endif %}" type="text" name="comment[author]" id="CommentAuthor" value="{{ form.author }}" autocapitalize="words" placeholder="Enter name">
              </div>
              <div class="flex flex-col lg:w-2/3">
                <label for="CommentEmail" class="text-sm mt-5 mb-2">E-MAIL ADDRESS</label>
                <input class="border border-black py-3.5 px-3 text-sm placeholder:text-neutral-500 {% if form.errors contains 'email' %}border-red-500{% else %}border-black{% endif %}" type="email" name="comment[email]" id="CommentEmail" value="{{ form.email }}" autocorrect="off" autocapitalize="off" placeholder="Enter e-mail">
              </div>
            </div>
            <label for="CommentBody" class="text-sm mt-5 mb-2">COMMENT</label>
            <textarea class="border border-black py-3.5 px-3 text-sm placeholder:text-neutral-500 {% if form.errors contains 'body' %}border-red-500{% else %}border-black{% endif %}" name="comment[body]" id="CommentBody" placeholder="Enter a comment">{{ form.body }}</textarea>

            <button type="submit" class="mt-5 bg-downy-300 text-white text-lg font-bold pt-3 pb-2">POST COMMENT</button>
            {% if blog.moderated? %}
              <p class="text-xs text-center mt-3 text-neutral-700">Please note, comments must be approved before they are published</p>
            {% endif %}
          </div>
        {% endform %}

        
          {% for comment in article.comments %}
            <div class="mt-9 lg:mt-12 pb-5 border-b border-neutral-700 lg:flex">
              <div class="lg:w-1/3">
                <p class="text-lg font-black text-neutral-700" aria-label="Comment author">{{ comment.author }}</p>
                <p class="mt-2" aria-label="Comment date">{{ comment.created_at | date: '%B %d, %Y' }}</p>
              </div>
              <span class="mt-3 lg:mt-0 text-sm lg:text-base lg:w-2/3">{{ comment.content }}</span>
            </div>
          {% endfor %}
        
      {% endif %}
    </div>
  </div>
  <div class="hidden lg:flex w-1/6 mt-7 ml-5">
    <div class="h-px w-12 bg-black mt-2 mr-4"></div>
    <div class="flex flex-col [&>*]:font-black [&>*]:mb-3" id="article-headers">
      <p>Intro</p>
    </div>
  </div>
</div>

<script>
  function shareFacebook () {
    window.open('https://www.facebook.com/sharer.php?u=' + window.location.href, '_blank')
  }

  function shareTwitter () {
    window.open('https://twitter.com/intent/tweet?url=' + window.location.href, '_blank')
  }

  // function shareInstagram () {
  //   const query = encodeURIComponent(text)
  //   window.open('' + window.location.href)
  // }

  function shareLinkedin () {
    window.open('https://www.linkedin.com/sharing/share-offsite/?url=' + window.location.href, '_blank')
  }

  function sharePinterest (image) {
    window.open('https://pinterest.com/pin/create/button/?url=' + window.location.href + '&media=' + image, '_blank')
  }

  document.addEventListener("DOMContentLoaded", () => {
    let headers = document.querySelectorAll("#article-content-wrapper h1,#article-content-wrapper h2,#article-content-wrapper h3");

    headers.forEach((el) => {
      let newElement = document.createElement("p");
      newElement.classList.add("text-neutral-500");
      newElement.innerHTML = el.innerHTML;
      document.getElementById("article-headers").append(newElement);
    });
  });
</script>

{% comment %}
  {
    "name": "Article pages",
    "settings": [
      {
        "type": "checkbox",
        "id": "blog_show_tags",
        "label": "Show tags",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "blog_show_date",
        "label": "Show date",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "blog_show_comments",
        "label": "Show comment count",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "blog_show_author",
        "label": "Show author"
      },
      {
        "type": "checkbox",
        "id": "social_sharing_blog",
        "label": "Show social sharing buttons",
        "default": true
      }
    ]
  }
{% endcomment %}
